#include "ppc_test.h"
#include "test_macros.h"

PPCTEST_CODE_BEGIN

#-------------------------------------------------------------
# Basic tests
#-------------------------------------------------------------

# Signature of TEST_SYNRAM_INX_LOOP is:
# testnum, obus addr, inx addr, data, res

# The tests
#define SYNRAM_BOT_BASE ((0x03c00000 << 2) | (1 << 31))
TEST_SYNRAM_INX_LOOP(2, SYNRAM_BOT_BASE, 0, zeros, res2)
TEST_SYNRAM_INX_LOOP(3, SYNRAM_BOT_BASE, 0, seq, res3)
TEST_SYNRAM_INX_LOOP(4, SYNRAM_BOT_BASE + 128, 1, zeros, res4)
TEST_SYNRAM_INX_LOOP(5, SYNRAM_BOT_BASE + 128, 1, seq, res5)
TEST_SYNRAM_INX_LOOP(6, SYNRAM_BOT_BASE + 256 * 256 - 128, 512 - 1, zeros, res6)
TEST_SYNRAM_INX_LOOP(7, SYNRAM_BOT_BASE + 256 * 256 - 128, 512 - 1, seq, res7)

TEST_PASSFAIL

PPCTEST_CODE_END

PPCTEST_DATA_BEGIN

TEST_DATA

.align 4
zeros:	.fill FXV_NUM_SLICES * FXV_BYTES_PER_SLICE, 1, 0x0
seq:	.byte 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f
	.byte 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1a, 0x1b, 0x1c, 0x1d, 0x1e, 0x1f
	.byte 0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2a, 0x2b, 0x2c, 0x2d, 0x2e, 0x2f
	.byte 0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3a, 0x3b, 0x3c, 0x3d, 0x3e, 0x3f
	.byte 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f
	.byte 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1a, 0x1b, 0x1c, 0x1d, 0x1e, 0x1f
	.byte 0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2a, 0x2b, 0x2c, 0x2d, 0x2e, 0x2f
	.byte 0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3a, 0x3b, 0x3c, 0x3d, 0x3e, 0x3f
res2:	.fill FXV_NUM_SLICES * FXV_BYTES_PER_SLICE, 1, 0xff
res3:	.fill FXV_NUM_SLICES * FXV_BYTES_PER_SLICE, 1, 0xff
res4:	.fill FXV_NUM_SLICES * FXV_BYTES_PER_SLICE, 1, 0xff
res5:	.fill FXV_NUM_SLICES * FXV_BYTES_PER_SLICE, 1, 0xff
res6:	.fill FXV_NUM_SLICES * FXV_BYTES_PER_SLICE, 1, 0xff
res7:	.fill FXV_NUM_SLICES * FXV_BYTES_PER_SLICE, 1, 0xff

PPCTEST_DATA_END
